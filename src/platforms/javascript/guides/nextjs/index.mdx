---
title: NextJS
sdk: sentry.javascript.nextjs
redirect_from:
  - /platforms/javascript/nextjs/
  - /clients/javascript/integrations/nextjs/
  - /sdks/nextjs/
  - /platforms/nextjs/
description: "Learn how to use Sentry's NextJS SDK and how it automatically reports errors and exceptions in your application."
---

To use Sentry with a NextJS application, we will need to use Sentryâ€™s NextJS SDK: `@sentry/nextjs`.

## Install

Add the Sentry SDK as a dependency using `npm` or `yarn`:

```bash {tabTitle:npm}
npm install --save @sentry/nextjs
```

```bash {tabTitle:Yarn}
yarn add @sentry/nextjs
```

## Configure

Currently, the default config is rather lengthy; but, we provide a more automatic way of configuring it.
Either way, the default `next.config.js` provides frontend and backend error monitoring, Source Maps for JavaScript and TypeScript, and Vercel deployment support.

The automatic configuration will at the end create a `sentry.properties` file and populate it with some data; including, but not limited to, the organization, project, and the authentication token.
We can also provide this data through environment variables, which can be used in combination with the properties file, although they will override it:

```properties {tabTitle:properties} {filename:sentry.properties}
defaults.org=___ORG_SLUG___
defaults.project=___PROJECT_SLUG___
auth.token=___TOKEN___
```

```bash
export SENTRY_ORG=___ORG_SLUG___
export SENTRY_PROJECT=___PROJECT_SLUG___
export SENTRY_AUTH_TOKEN=___TOKEN___
```

### Automatic configuration

The [`sentry-wizard`](https://github.com/getsentry/sentry-wizard) provides an automatic way of setting up the configuration, and we only need to follow a few steps to finish the setup:

```bash
sentry-wizard -i nextjs
```

### Manual configuration

First, we need to create the following `next.config.js` file (if there's already one, we need to merge it manually):

```javascript {filename:next.config.js}
const {
  NEXT_PUBLIC_SENTRY_DSN: SENTRY_DSN,
  VERCEL_GITHUB_COMMIT_SHA,
  VERCEL_GITLAB_COMMIT_SHA,
  VERCEL_BITBUCKET_COMMIT_SHA,
} = process.env;

const COMMIT_SHA =
  VERCEL_GITHUB_COMMIT_SHA ||
  VERCEL_GITLAB_COMMIT_SHA ||
  VERCEL_BITBUCKET_COMMIT_SHA;

const SentryWebpackPlugin = require('@sentry/webpack-plugin');
const fs = require('fs');

// We require this to fake that our plugin matches the next version
function replaceVersion() {
  const package = require('./package.json');
  if (package && package.dependencies && package.dependencies.next) {
    const packagePluginPath = `./node_modules/@sentry/next-plugin-sentry/package.json`;
    const packagePlugin = require(packagePluginPath);
    packagePlugin.version = package.dependencies.next;
    fs.writeFileSync(packagePluginPath, JSON.stringify(packagePlugin));
  } else {
    console.error(`Can't find 'next' dependency`);
  }
}
replaceVersion();

const basePath = '';

module.exports = {
  experimental: { plugins: true },
  env: {
    SENTRY_DSN: SENTRY_DSN || '___DSN___',
    // Make the COMMIT_SHA available to the client so that Sentry events can be
    // marked for the release they belong to. It may be undefined if running
    // outside of Vercel
    NEXT_PUBLIC_COMMIT_SHA: COMMIT_SHA,
  },
  plugins: ['@sentry/next-plugin-sentry'],
  // Sentry.init config for server-side code. Can accept any available config option.
  serverRuntimeConfig: {
    sentry: {
      // debug: true,
    },
  },
  // Sentry.init config for client-side code (and fallback for server-side)
  // can accept only serializeable values. For more granular control see below.
  publicRuntimeConfig: {
    sentry: {
      // debug: true,
    },
  },
  productionBrowserSourceMaps: true,
  webpack: (config, { dev }) => {
    config.devtool = 'source-map';
    config.plugins.push(
      new SentryWebpackPlugin({
        // Sentry project config
        configFile: 'sentry.properties',
        // webpack specific configuration
        stripPrefix: ['webpack://_N_E/'],
        urlPrefix: `~${basePath}/_next`,
        include: '.next/',
        ignore: ['node_modules', 'webpack.config.js'],
        // dryRun in non-production environments
        dryRun: dev,
        release: COMMIT_SHA,
      }),
    );
    return config;
  },
  basePath,
};
```

If we're using TypeScript, make sure the compiler generates Source Maps:

```json {filename:tsconfig.json}
{
  "compilerOptions": {
    "sourceMap": true,
  }
}
```

## Usage

Using the SDK is as simple as just importing it:
```javascript
import * as Sentry from '@sentry/nextjs';
```
